<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Mensajes - Ejercicio DOM</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Contenedor principal que agrupa toda la aplicaci√≥n -->
    <div class="container">
        
        <!-- ===== SECCI√ìN: ENCABEZADO ===== -->
        <!-- Header sem√°ntico que contiene el t√≠tulo y descripci√≥n de la aplicaci√≥n -->
        <header class="header">
            <!-- T√≠tulo principal de nivel 1, representa el nombre de la aplicaci√≥n -->
            <h1 class="header__title">Sistema de Gesti√≥n de Tareas</h1>
            
            <!-- P√°rrafo descriptivo que explica el prop√≥sito de la aplicaci√≥n -->
            <p class="header__subtitle">Busca usuarios y registra tareas asociadas | Ejercicio DOM - SENA</p>
        </header>

        <!-- ===== SECCI√ìN: B√öSQUEDA DE USUARIO ===== -->
        <!-- Section sem√°ntico que agrupa el formulario de b√∫squeda de usuario -->
        <section class="form-section">
            <!-- Card contenedor para organizar visualmente el formulario -->
            <div class="card">
                <!-- T√≠tulo secundario que identifica la secci√≥n de b√∫squeda -->
                <h2 class="card__title">Buscar Usuario</h2>
                
                <!-- Formulario de b√∫squeda de usuario por documento -->
                <!-- El atributo novalidate desactiva la validaci√≥n HTML5 para usar validaci√≥n personalizada en JavaScript -->
                <form id="searchUserForm" class="form" novalidate>
                    <!-- Grupo de campos del formulario para organizar label + input + mensaje de error -->
                    <div class="form__group">
                        <!-- Label asociado al input mediante el atributo 'for', mejora accesibilidad -->
                        <label for="userDocument" class="form__label">
                            Documento del Usuario
                        </label>
                        
                        <!-- Input de tipo number para capturar el documento del usuario -->
                        <!-- El aria-required se agregar√° din√°micamente desde JavaScript para control total de validaci√≥n -->
                        <input 
                            type="text" 
                            id="userDocument" 
                            class="form__input" 
                            placeholder="Ingresa el n√∫mero de documento"
                        >
                        
                        <!-- Span vac√≠o que se llenar√° din√°micamente con mensajes de error desde JavaScript -->
                        <span class="form__error" id="userDocumentError"></span>
                    </div>

                    <!-- Bot√≥n de tipo submit para enviar el formulario de b√∫squeda -->
                    <button type="submit" class="btn btn--primary" id="searchBtn">
                        <!-- Span para el texto del bot√≥n -->
                        <span class="btn__text">Buscar Usuario</span>
                        
                        <!-- Span para el √≠cono visual del bot√≥n -->
                        <span class="btn__icon">üîç</span>
                    </button>
                </form>
            </div>
        </section>

        <!-- ===== SECCI√ìN: DATOS DEL USUARIO ===== -->
        <!-- Section que muestra los datos del usuario encontrado -->
        <!-- Esta secci√≥n est√° oculta por defecto y se muestra cuando se encuentra un usuario -->
        <section class="user-data-section hidden" id="userDataSection">
            <!-- Card contenedor para organizar visualmente los datos del usuario -->
            <div class="card">
                <!-- T√≠tulo secundario que identifica la secci√≥n de datos del usuario -->
                <h2 class="card__title">Datos del Usuario</h2>
                
                <!-- Div contenedor para organizar los datos del usuario en formato de informaci√≥n -->
                <div class="user-info" id="userInfo">
                    <!-- P√°rrafo para mostrar el ID del usuario -->
                    <!-- El strong enfatiza visualmente la etiqueta -->
                    <p class="user-info__item">
                        <strong>ID:</strong> 
                        <!-- Span que se llenar√° din√°micamente con el ID del usuario desde JavaScript -->
                        <span id="userId"></span>
                    </p>
                    
                    <!-- P√°rrafo para mostrar el nombre del usuario -->
                    <p class="user-info__item">
                        <strong>Nombre:</strong> 
                        <!-- Span que se llenar√° din√°micamente con el nombre del usuario desde JavaScript -->
                        <span id="userName"></span>
                    </p>
                    
                    <!-- P√°rrafo para mostrar el email del usuario -->
                    <p class="user-info__item">
                        <strong>Email:</strong> 
                        <!-- Span que se llenar√° din√°micamente con el email del usuario desde JavaScript -->
                        <span id="userEmail"></span>
                    </p>
                </div>
            </div>
        </section>

        <!-- ===== SECCI√ìN: REGISTRO DE TAREAS ===== -->
        <!-- Section que contiene el formulario para registrar nuevas tareas -->
        <!-- Esta secci√≥n est√° oculta por defecto y se habilita cuando se encuentra un usuario -->
        <section class="form-section hidden" id="taskFormSection">
            <!-- Card contenedor para organizar visualmente el formulario de tareas -->
            <div class="card">
                <!-- T√≠tulo secundario que identifica la secci√≥n de registro de tareas -->
                <h2 class="card__title">Registrar Nueva Tarea</h2>
                
                <!-- Formulario de registro de tareas -->
                <!-- El atributo novalidate desactiva la validaci√≥n HTML5 para usar validaci√≥n personalizada en JavaScript -->
                <form id="taskForm" class="form" novalidate>
                    <!-- Grupo de campos para el t√≠tulo de la tarea -->
                    <div class="form__group">
                        <!-- Label asociado al input del t√≠tulo -->
                        <label for="taskTitle" class="form__label">
                            T√≠tulo de la Tarea
                        </label>
                        
                        <!-- Input de tipo text para capturar el t√≠tulo de la tarea -->
                        <!-- El aria-required se agregar√° din√°micamente desde JavaScript -->
                        <input 
                            type="text" 
                            id="taskTitle" 
                            class="form__input" 
                            placeholder="Ingresa el t√≠tulo de la tarea"
                        >
                        
                        <!-- Span para mostrar mensajes de error de validaci√≥n -->
                        <span class="form__error" id="taskTitleError"></span>
                    </div>

                    <!-- Grupo de campos para la descripci√≥n de la tarea -->
                    <div class="form__group">
                        <!-- Label asociado al textarea de la descripci√≥n -->
                        <label for="taskDescription" class="form__label">
                            Descripci√≥n
                        </label>
                        
                        <!-- Textarea para capturar la descripci√≥n detallada de la tarea -->
                        <!-- El atributo rows define la altura visual inicial del textarea -->
                        <!-- El aria-required se agregar√° din√°micamente desde JavaScript -->
                        <textarea 
                            id="taskDescription" 
                            class="form__input form__textarea" 
                            placeholder="Describe la tarea..."
                            rows="4"
                        ></textarea>
                        
                        <!-- Span para mostrar mensajes de error de validaci√≥n -->
                        <span class="form__error" id="taskDescriptionError"></span>
                    </div>

                    <!-- Grupo de campos para el estado de la tarea -->
                    <div class="form__group">
                        <!-- Label asociado al select del estado -->
                        <label for="taskStatus" class="form__label">
                            Estado de la Tarea
                        </label>
                        
                        <!-- Select (lista desplegable) para seleccionar el estado de la tarea -->
                        <!-- El aria-required se agregar√° din√°micamente desde JavaScript -->
                        <select 
                            id="taskStatus" 
                            class="form__input"
                        >
                            <!-- Opci√≥n por defecto deshabilitada que funciona como placeholder -->
                            <option value="" disabled selected>Selecciona un estado</option>
                            
                            <!-- Opciones de estado disponibles para la tarea -->
                            <option value="pendiente">Pendiente</option>
                            <option value="en_progreso">En Progreso</option>
                            <option value="completada">Completada</option>
                        </select>
                        
                        <!-- Span para mostrar mensajes de error de validaci√≥n -->
                        <span class="form__error" id="taskStatusError"></span>
                    </div>

                    <!-- Bot√≥n de tipo submit para enviar el formulario de tareas -->
                    <button type="submit" class="btn btn--primary" id="taskSubmitBtn">
                        <!-- Span para el texto del bot√≥n -->
                        <span class="btn__text">Registrar Tarea</span>
                    </button>
                </form>
            </div>
        </section>

        <!-- ===== SECCI√ìN: LISTA DE TAREAS ===== -->
        <!-- Section que muestra la tabla de tareas registradas -->
        <!-- Esta secci√≥n est√° oculta por defecto y se muestra cuando hay tareas registradas -->
        <section class="tasks-section hidden" id="tasksSection">
            <!-- Div contenedor del encabezado de la secci√≥n de tareas -->
            <div class="tasks-header">
                <!-- T√≠tulo secundario que identifica la secci√≥n de tareas registradas -->
                <h2 class="tasks-header__title">Tareas Registradas</h2>
                
                <!-- Span que muestra el contador de tareas -->
                <!-- Se actualiza din√°micamente desde JavaScript -->
                <span class="tasks-header__count" id="tasksCount">0 tareas</span>
            </div>
            
            <!-- Div contenedor para la tabla de tareas -->
            <div class="tasks-table-container">
                <!-- Tabla HTML para mostrar las tareas de forma estructurada -->
                <!-- La tabla permite organizar datos en filas y columnas -->
                <table class="tasks-table" id="tasksTable">
                    <!-- Thead agrupa las filas de encabezado de la tabla -->
                    <thead>
                        <!-- Fila de encabezado que contiene los t√≠tulos de las columnas -->
                        <tr>
                            <!-- Cada th representa un encabezado de columna -->
                            <!-- El scope="col" mejora la accesibilidad indicando que es encabezado de columna -->
                            <th scope="col">#</th>
                            <th scope="col">T√≠tulo</th>
                            <th scope="col">Descripci√≥n</th>
                            <th scope="col">Estado</th>
                            <th scope="col">Usuario</th>
                            <!-- Columna nueva para los botones de editar y eliminar (RF-03 y RF-04) -->
                            <th scope="col">Acciones</th>
                        </tr>
                    </thead>
                    
                    <!-- Tbody agrupa las filas de datos de la tabla -->
                    <!-- Las filas de datos se crear√°n din√°micamente desde JavaScript -->
                    <tbody id="tasksTableBody">
                        <!-- Las filas de tareas se insertar√°n aqu√≠ din√°micamente -->
                    </tbody>
                </table>
            </div>

            <!-- Div que se muestra cuando no hay tareas registradas -->
            <!-- Estado vac√≠o con mensaje informativo -->
            <!-- El √≠cono se puede agregar din√°micamente desde JavaScript o usar un emoji directamente -->
            <div class="tasks-empty" id="tasksEmptyState">
                <!-- Emoji como √≠cono decorativo simple (alternativa al SVG) -->
                <div class="tasks-empty__icon">üìã</div>
                
                <!-- P√°rrafo con mensaje principal del estado vac√≠o -->
                <p class="tasks-empty__text">No hay tareas registradas</p>
                
                <!-- P√°rrafo con mensaje secundario que gu√≠a al usuario -->
                <p class="tasks-empty__subtext">Busca un usuario y registra su primera tarea</p>
            </div>
        </section>

        <!-- ===== SECCI√ìN: PIE DE P√ÅGINA ===== -->
        <!-- Footer sem√°ntico que contiene informaci√≥n institucional -->
        <footer class="footer">
            <!-- P√°rrafo con informaci√≥n del ejercicio y la instituci√≥n -->
            <p class="footer__text">Ejercicio de Manipulaci√≥n del DOM - Transferencia del Conocimiento | SENA - T√©cnico en Programaci√≥n de Software</p>
        </footer>
    </div>

    <!-- Script que enlaza el archivo JavaScript externo -->
    <!-- Se coloca al final del body para asegurar que el DOM est√© completamente cargado antes de ejecutar el script -->

    <!-- ===== MODAL DE EDICI√ìN DE TAREAS (RF-03 - UPDATE) ===== -->
    <!-- Este overlay oscuro cubre toda la pantalla cuando el modal est√° abierto -->
    <!-- JavaScript lo muestra/oculta quitando y agregando la clase 'hidden' -->
    <div class="modal-overlay hidden" id="editModal">
        
        <!-- Contenedor del modal propiamente dicho (la caja blanca al centro) -->
        <div class="modal">
            
            <!-- Encabezado del modal con t√≠tulo y bot√≥n de cerrar -->
            <div class="modal__header">
                <!-- T√≠tulo del modal que indica la acci√≥n a realizar -->
                <h2 class="modal__title">Editar Tarea</h2>
                
                <!-- Bot√≥n X para cerrar el modal sin guardar cambios -->
                <!-- Su handler se registra din√°micamente desde handlers.js -->
                <button class="modal__close" id="editCancelBtn" type="button">‚úï</button>
            </div>

            <!-- Formulario de edici√≥n dentro del modal -->
            <!-- novalidate desactiva la validaci√≥n HTML5 para usar la nuestra en JS -->
            <form id="editTaskForm" class="form" novalidate>
                
                <!-- Campo oculto que guarda el ID de la tarea que se est√° editando -->
                <!-- JavaScript lee este valor al enviar el PATCH para saber qu√© tarea actualizar -->
                <input type="hidden" id="editTaskId">

                <!-- Grupo de campos para el t√≠tulo de la tarea -->
                <div class="form__group">
                    <!-- Label asociado al input de t√≠tulo de edici√≥n -->
                    <label for="editTaskTitle" class="form__label">
                        T√≠tulo de la Tarea
                    </label>
                    
                    <!-- Input de texto precargado con el t√≠tulo actual de la tarea -->
                    <!-- JavaScript llenar√° este campo con task.title al abrir el modal -->
                    <input
                        type="text"
                        id="editTaskTitle"
                        class="form__input"
                        placeholder="Ingresa el nuevo t√≠tulo"
                    >
                </div>

                <!-- Grupo de campos para la descripci√≥n de la tarea -->
                <div class="form__group">
                    <!-- Label asociado al textarea de descripci√≥n de edici√≥n -->
                    <label for="editTaskDescription" class="form__label">
                        Descripci√≥n
                    </label>
                    
                    <!-- Textarea precargado con la descripci√≥n actual de la tarea -->
                    <!-- JavaScript llenar√° este campo con task.description al abrir el modal -->
                    <textarea
                        id="editTaskDescription"
                        class="form__input form__textarea"
                        placeholder="Ingresa la nueva descripci√≥n..."
                        rows="4"
                    ></textarea>
                </div>

                <!-- Grupo de campos para el estado de la tarea -->
                <div class="form__group">
                    <!-- Label asociado al select de estado de edici√≥n -->
                    <label for="editTaskStatus" class="form__label">
                        Estado de la Tarea
                    </label>
                    
                    <!-- Select precargado con el estado actual de la tarea -->
                    <!-- JavaScript seleccionar√° la opci√≥n correspondiente al estado actual -->
                    <select id="editTaskStatus" class="form__input">
                        <!-- Opci√≥n por defecto deshabilitada que funciona como placeholder -->
                        <option value="" disabled>Selecciona un estado</option>
                        
                        <!-- Las mismas opciones que el formulario de creaci√≥n -->
                        <option value="pendiente">Pendiente</option>
                        <option value="en_progreso">En Progreso</option>
                        <option value="completada">Completada</option>
                    </select>
                </div>

                <!-- Contenedor de los botones de acci√≥n del modal -->
                <div class="modal__actions">
                    <!-- Bot√≥n para cancelar la edici√≥n y cerrar el modal sin guardar -->
                    <!-- type="button" evita que dispare el submit del formulario -->
                    <button type="button" class="btn btn--secondary" id="editCancelBtn">
                        <span class="btn__text">Cancelar</span>
                    </button>
                    
                    <!-- Bot√≥n para guardar los cambios enviando el formulario -->
                    <!-- type="submit" dispara el evento submit del form al hacer clic -->
                    <button type="submit" class="btn btn--primary">
                        <span class="btn__text">Guardar Cambios</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>